<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>

    <script src="lib/htmlwidgets-1.5.1/htmlwidgets.js"></script>
    <script src="lib/plotly-binding-4.9.2.1/plotly.js"></script>
    <script src="lib/typedarray-0.1/typedarray.min.js"></script>
    <script src="lib/jquery-1.11.3/jquery.min.js"></script>
    <script src="lib/crosstalk-1.0.0/js/crosstalk.min.js"></script>
    <script src="lib/plotly-main-1.52.2/plotly-latest.min.js"></script>
    <link href="lib/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
    <link href="lib/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />

    <title>plotly</title>
  </head>

  <body>
    <div id="rEffplots-header"></div>

    <div id="htmlwidget_container">
      <div id="rEffplots" style="width:100%;height:400px;" class="plotly html-widget"></div>
    </div>

    <script>
      // $("#rEffplots").removeClass("html-widget-static-bound");
      // $("#rEffplots-data").text("");
      $.ajax({
        url: "rEff-data.json",
        success: function(data) { 
          var rEffplotsData = $("#rEffplots").data();
          $.extend(rEffplotsData,data); 
          $("#rEffplots").data(rEffplotsData);
          // console.log(JSON.stringify(data));
          $("#rEffplots-data").text(JSON.stringify(data));
          // setTimeout(function() { window.HTMLWidgets.staticRender(); }, 1000);
          Plotly.newPlot("rEffplots", rEffplotsData.x);
        },
        error: function() {
          $("#rEffplots-header").html("Error loading data.");
        }
      });
    </script>

    <script type="application/json" id="rEffplots-data" data-for="rEffplots">
      {
        "evals": [],
        "jsHooks": [],
        "x": {
          "highlight": {
            "debounce": 0,
            "dynamic": false,
            "on": "plotly_click",
            "opacityDim": 0.2,
            "persistent": false,
            "selected": {
              "opacity": 1
            },
            "selectize": false
          },
          "layout": {
            "annotations": [{
              "align": "left",
              "font": { "color": "red" },
              "showarrow": false,
              "text": "<e2><86><91> exponential increase<br>in number of new cases",
              "textangle": 0,
              "x": "2020-02-23",
              "xanchor": "left",
              "xref": "x",
              "y": 1.2,
              "yanchor": "middle",
              "yref": "y2"
            },{
              "align": "left",
              "font": { "color": "red" },
              "showarrow": false,
              "text": "<e2><86><93> decrease in number of new cases",
              "textangle": 0,
              "x": "2020-02-23",
              "xanchor": "left",
              "xref": "x",
              "y": 0.9,
              "yanchor": "middle",
              "yref": "y2"
            },{
              "font": { "color": "black", "size": 10 },
              "showarrow": false,
              "text": "Data Source: FOPH (2020-04-30); openZH (2020-05-02)",
              "x": 1,
              "xanchor": "right",
              "xref": "paper",
              "xshift": 0,
              "y": -0.1,
              "yanchor": "auto",
              "yref": "paper",
              "yshift": 0
            },{
              "align": "left",
              "font": { "color": "black", "size": 11 },
              "showarrow": false,
              "text": "<b>*</b>&nbsp;This is the most recent<br>possible R<sub>e</sub> estimate due to <br>delays between infection and</br>the last data observation",
              "x": 1,
              "xanchor": "left",
              "xref": "paper",
              "xshift": 10,
              "y": 0.35,
              "yanchor": "bottom",
              "yref": "paper",
              "yshift": 0
            },{
              "align": "left",
              "bgcolor": "#eeeeee",
              "font": { "color": "black", "size": 11 },
              "height": 90,
              "showarrow": false,
              "text": "&nbsp;<b>Interactive Plot</b><br>&nbsp;&nbsp;\u2022 click legend to toggle<br>&nbsp;&nbsp;&nbsp;&nbsp;datatypes. Double-click to<br>&nbsp;&nbsp;&nbsp;&nbsp;isolate.<br>&nbsp;&nbsp;\u2022 hover over bars/points<br>&nbsp;&nbsp;&nbsp;&nbsp;for details",
              "valign": "top",
              "width": 174,
              "x": 1,
              "xanchor": "left",
              "xref": "paper",
              "xshift": 10,
              "y": 0.8,
              "yanchor": "top",
              "yref": "paper",
              "yshift": 0
            }],
            "hovermode": "closest",
            "images": [],
            "legend": {
              "title": { "text": "<b>Data Type</b>" }
            },
            "margin": { "b": 40,
              "l": 60,
              "r": 10,
              "t": 25
            },
            "shapes": [
              {
                "line": {
                  "color": "red",
                  "width": 0.5
                },
                "type": "line",
                "x0": "2020-02-23",
                "x1": "2020-05-03",
                "xref": "x",
                "y0": 1,
                "y1": 1,
                "yref": "y2"
              }
            ],
            "showlegend": true,
            "xaxis": {
              "anchor": "y3",
              "automargin": true,
              "domain": [
                0,
                1
              ],
              "dtick": 259200000,
              "fixedrange": true,
              "range": [
                "2020-02-23",
                "2020-05-03"
              ],
              "showgrid": true,
              "tick0": "2020-02-23",
              "tickangle": 45,
              "tickformat": "%b-%d",
              "title": "",
              "type": "date"
            },
            "yaxis": {
              "anchor": "x",
              "automargin": true,
              "domain": [
                0.666666666666667,
                1
              ],
              "fixedrange": true,
              "title": {
                "font": {
                  "size": 14
                },
                "text": "New observations"
              }
            },
            "yaxis2": {
              "anchor": "x",
              "automargin": true,
              "domain": [
                0.333333333333333,
                0.646666666666667
              ],
              "fixedrange": true,
              "range": [
                0,
                2
              ],
              "title": {
                "font": {
                  "size": 14
                },
                "text": "Reproductive number R<sub>e</sub>"
              },
              "zeroline": true
            },
            "yaxis3": {
              "anchor": "x",
              "automargin": true,
              "domain": [
                0,
                0.313333333333333
              ],
              "fixedrange": true,
              "title": "y",
              "visible": false
            }
          }
        }
      }
    </script>

    <script type="application/htmlwidget-sizing" data-for="rEffplots">
      {"viewer":{"width":"100%","height":400,"padding":15,"fill":true},"browser":{"width":"100%","height":400,"padding":40,"fill":true}}
    </script>
  </body>
</html>
